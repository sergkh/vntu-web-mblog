Java
----

1.1 Опис платформи

*Java* (Джава) — об'єктно-орієнтована мова програмування з *C*-подібним синтаксисом. Мову й платформу *Java* вперше опубліковано у 1995 році компанією Sun Microsystems (наразі придбана компанією Oracle). 

В основу платформи покладено принцип: код написаний і скомпільований один раз, запускається всюди. Даний принцип реалізовується за рахунок того, що Java програми компілюються не у проміжний код — байткод, який інтерпретується віртуальною машиною (*VM* – Virtual Machine) написаної для конкретної платформи.

Синтаксис *Java* дуже близький до синтаксису мови *C++*, однак в деяких речах написання коду на *Java* відрізняється. Однією з значний відмінностей є те, що в платформі *Java* широко використовується автоматичне керування пам’яттю, яке називається збирач сміття (*GC* – Garbage Collector). Такий підхід дозволяє не піклуватись про видалення об’єктів, які створюються під час роботи програми — збирач сміття видалить їх автоматично, коли виявить, що вони більше не використовуються. На противагу в *C++* необхідно завжди викликати `delete` для об’єктів створених операцією `new`.

Ще однією відмінністю від *С*/*C++* є те, що код та дані обов’язково повинні міститись в класах, описати функцію поза класом не можна. Тому головна функція `main` повинна також знаходитись в певному класі й виглядатиме на *Java* так:

    package lections;

    public class Test {
        public void static main(String[] args) {
            System.out.println("Test");
        }
    }

Навіть стандартна функція виведення `println` знаходиться в статичному полі `out` (типу `PrintWriter`) класу `System`.

Класи можливо опціонально групувати за призначенням у пакети (*packages*). В прикладі клас знаходиться в пакеті `lections`. Компілятор *Java* вимагає щоб клас `Test` знаходився в однойменному файлі `Test.java` (регістр також має значення) й щоб пакети відображались на структуру папок, тобто шлях до файлу має бути: `lections/Test.java`

1.4 Налаштування засобів розробки та створення проекту

Для початку роботи з *Java* необхідно встановити інструменти розробника *Java Development Kit* – *JDK* та середовище розробки. Остання версія *JDK* на момент написання — 8-ма й може бути знайдена на сайті **Oracle**, однак усі приклади повинні працювати також й на новіших версіях компілятора та віртуальної машини.

В процесі розробки буде широко використовуватись популярний *Java* фреймворк – *Spring*, який має власне середовище розробки — *Spring Tool Suite — STS*. Дане середовище базується на IDE (*Eclipse*)[http://eclipse.org] з набором плагінів й одразу налаштовано для роботи, як з *Spring* фреймворком, так і зі звичайними *Java* проектами. Завантажити *STS* можна за посиланням (https://spring.io/tools/sts/)[https://spring.io/tools/sts/]. Встановлення середовище не потребує — достатньо просто його розпакувати в будь-яку папку.

Для створення нового проекту використаємо майстер «Spring Starter Project», що знаходиться в меню *File → New → Spring Starter Project*: 

TO BE DONE: add sts-create.png

В майстрі створення проекту можна обрати довільне ім’я проекту, групи й артефакту. Необхідно змінити тип пакування на більш підходящий для веб проектів — War (Web ARchive). Обов’язковими залежностями для проекту є: Web, Thymeleaf, який буде використовуватись для побудови HTML сторінок, H2 та JSA – для організації роботи з базою даних й Security — модуль який забезпечить аутентифікацію та обмеження прав доступу користувачів.

TO BE DONE: add sts-settings.png

В результаті буде отримано згенерований проект, який матиме вигляд:

TO BE DONE: add sts-newly-created.png

Згенерований файл LabsApplication.java містить однойменний головний клас LabsApplication з методом main, який використовуватиметься для запуску додатку.Однак перед запуском серверу необхідно створити сторінку, яку можна буде відобразити користувачу. В папці `src/main/resources/templates` створимо файл `index.html` з довільним HTML документом (наприклад з першої лекції). 

Для того, щоб відобразити створений файл у браузері, необхідно також створити новий клас, який буде вказувати для якого URL буде відображатись вказаний HTML-документ й надалі буде також використовувати для отримання даних з СУБД. Для цього можна скористатись діалогом створення нового класу, що знаходиться у головному меню *File → New → Class*:

TO BE DONE: add sts-new-class.png

Зміст класу наведено нижче. В ньому створюється публічний клас IndexController, який помічений аннотацією `@Controller`, яка означає що даний клас предназначений для обробки запитів браузера. Даний клас містить один публічний метод index(), який має анотацію `@RequestMapping("/")`, означає — даний метод буде викликатись при переході на URL `/home`. Метод повертає стрічку `"index"` — назву шаблону, з папки `templates`, який необхідно відобразити користувачу (*Spring* автоматично додасть розширення .html до назви).

    package labs;

    import org.springframework.stereotype.Controller;
    import org.springframework.web.bind.annotation.RequestMapping;

    @Controller
    public class IndexController {
        
        @RequestMapping("/home")
        public String index() {
            return "index";
        }
    }

Тепер можна спробувати запустити створений проект, для чого необхідно викликати контекстне меню на файлі `LabsApplication.java` й обрати пункт *Run As → Spring Boot App* або *Run As → Java Application*:

TO BE DONE: add sts-first-run.png

Тепер можна перейти в браузері на сторінку `http://localhost:8080/home`:

TO BE DONE: add sts-first-run-result.png

Однак браузер видасть діалог логіну — це відбувається тому, що при створенні проекту було обрано *Security* як одну із залежностей. *Spring* при наявності *Security* автоматично заборонить вхід всім незареєстрованим користувачам. Для того, щоб тимчасово вимкнути цю функціональність необхідно додати в `application.properties` наступне налаштування:

    security.basic.enabled=false

Тепер можна запустити проект ще раз й побачити кінцевий результат:

TO BE DONE: add sts-final-result.png

>  Якщо при запуску виникає помилка, яка почиається з виразу: 
>  java.net.BindException: Address already in use 
>  — це означає, що порт 8080, на якому за замовчуванням запускається сервер вже зайнятий. Це може бути результатом попереднього невдалого запуску або він використовується сторонньою програмою. В останньому випадку можна змінити порт в файлі конфігурації:
>  server.port=9090

Також, щоб пришвидшити розробку можна додати наступні опції в `application.conf`:

    spring.thymeleaf.mode=HTML5
    spring.thymeleaf.cache=false

Перша опція змушує *Spring* застосовувати більш поблажливішу до помилок у HTML-документах перевірку – й фактично перекласти перевірку помилок на браузер. Друга опція вимкне кеш для HTML-документів, що дозволить бачити зміни в них не перезавантажуючи додаток, а просто перезавантаживши сторінку в браузері.

В результаті створено готовий додаток, який, поки що, тільки відображає звичайну статичну сторінку. Однак насправді, цей простий проект вже побудовано на потужному веб-сервері *Apache Tomcat*, який автоматично запускається при старті додатку. Також проект має всі необхідні бібліотеки для побудови динамічного сайту, організації роботи з базою даних, реалізації логіну, авторизації та прав доступу.

1.4 Наслідування та інтерфейси. Всі функції є віртуальними.

1.5 Основні типи

Назва   | Розмір      | Допустимі значення
--------|-------------|-------------
boolean |   —         | true/false
byte    |   8 біт	  | -128 до 127
char    |   16 біт    | 0 — 65535 (\u0000' - \uffff')
short   |   16 біт	  | -32768 — 32767
int		|	32 біта	  | -2147483648 — 2147483647
long	|	64 біта	  | -9223372036854775808 — 9223372036854775807
float	|	32 біта	  | 1,17549435e-38 — 3,4028235e+38
double	|	64 біта	  | 4,9e-324 — 1,7976931348623157e+308

1.6 Модифікатори доступу

1.7 Колекції: List та Map

1.8 Приклад контроллеру

1.9 Робота зі стрічками

1.10 Приклад JavaBean

